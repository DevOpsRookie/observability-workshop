<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This workshop is going to take you through the exciting journey of App Dev, what this is, why this is important, and how to get started right away!"><link href=https://signalfx.github.io/app-dev-workshop/module4/prep/ rel=canonical><meta name=author content="Sales Engineering"><link rel="shortcut icon" href=../../images/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-5.1.5"><title>Preparation - Splunk App Dev Workshop</title><link rel=stylesheet href=../../assets/stylesheets/main.df84b5fe.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.8435c73a.min.css><meta name=theme-color content><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../stylesheets/extra.css></head> <body dir=ltr data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#signalfx-smart-agent-lab-summary class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://signalfx.github.io/app-dev-workshop/ title="Splunk App Dev Workshop" class="md-header-nav__button md-logo" aria-label="Splunk App Dev Workshop"> <img src=../../images/logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Splunk App Dev Workshop </span> <span class="md-header-nav__topic md-ellipsis"> Preparation </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../module1/intro/ class=md-tabs__link> <b>SignalFx</b> </a> </li> <li class=md-tabs__item> <a href=../../module7/vo_getting_started/ class=md-tabs__link> <b>VictorOps</b> </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://signalfx.github.io/app-dev-workshop/ title="Splunk App Dev Workshop" class="md-nav__button md-logo" aria-label="Splunk App Dev Workshop"> <img src=../../images/logo.png alt=logo> </a> Splunk App Dev Workshop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> <b>SignalFx</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>SignalFx</b>" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>SignalFx</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-1 type=checkbox id=nav-2-1> <label class=md-nav__link for=nav-2-1> <b>Dashboards</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Dashboards</b>" data-md-level=2> <label class=md-nav__title for=nav-2-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Dashboards</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module1/intro/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../module1/editing/ title="Editing Charts" class=md-nav__link> Editing Charts </a> </li> <li class=md-nav__item> <a href=../../module1/filtering/ title="Using filters" class=md-nav__link> Using filters </a> </li> <li class=md-nav__item> <a href=../../module1/formulas/ title="Using formulas" class=md-nav__link> Using formulas </a> </li> <li class=md-nav__item> <a href=../../module1/overlay/ title="Using overlays" class=md-nav__link> Using overlays </a> </li> <li class=md-nav__item> <a href=../../module1/signalflow/ title=SignalFlow class=md-nav__link> SignalFlow </a> </li> <li class=md-nav__item> <a href=../../module1/adding-charts/ title="Adding charts" class=md-nav__link> Adding charts </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> <b>Detectors</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Detectors</b>" data-md-level=2> <label class=md-nav__title for=nav-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Detectors</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module2/detectors/ title="Working with Detectors" class=md-nav__link> Working with Detectors </a> </li> <li class=md-nav__item> <a href=../../module2/muting/ title="Working with Muting Rules" class=md-nav__link> Working with Muting Rules </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> <b>Service Bureau</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Service Bureau</b>" data-md-level=2> <label class=md-nav__title for=nav-2-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Service Bureau</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module3/service_bureau/ title="Billing and Usage" class=md-nav__link> Billing and Usage </a> </li> <li class=md-nav__item> <a href=../../module3/teams/ title=Teams class=md-nav__link> Teams </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4 checked> <label class=md-nav__link for=nav-2-4> <b>Smart Agent</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Smart Agent</b>" data-md-level=2> <label class=md-nav__title for=nav-2-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Smart Agent</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Preparation <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=Preparation class="md-nav__link md-nav__link--active"> Preparation </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1-module-pre-requisites class=md-nav__link> 1. Module Pre-requisites </a> </li> <li class=md-nav__item> <a href=#2-launch-multipass-instance class=md-nav__link> 2. Launch Multipass instance </a> </li> <li class=md-nav__item> <a href=#3-launch-ec2-instance class=md-nav__link> 3. Launch EC2 instance </a> <nav class=md-nav aria-label="3. Launch EC2 instance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-prepare-terraform class=md-nav__link> 3.1 Prepare Terraform </a> </li> <li class=md-nav__item> <a href=#32-create-ec2-instance class=md-nav__link> 3.2 Create EC2 Instance </a> </li> <li class=md-nav__item> <a href=#33-ssh-into-ec2-instance class=md-nav__link> 3.3 SSH into EC2 Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../k3s/ title="Deploy the Smart Agent in K3s" class=md-nav__link> Deploy the Smart Agent in K3s </a> </li> <li class=md-nav__item> <a href=../nginx/ title="Deploy NGINX in K3s" class=md-nav__link> Deploy NGINX in K3s </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> <b>Monitoring as Code</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Monitoring as Code</b>" data-md-level=2> <label class=md-nav__title for=nav-2-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Monitoring as Code</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module5/terraform/ title="Using Terraform for charts and dashboards" class=md-nav__link> Using Terraform for charts and dashboards </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-6 type=checkbox id=nav-2-6> <label class=md-nav__link for=nav-2-6> <b>µAPM</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>µAPM</b>" data-md-level=2> <label class=md-nav__title for=nav-2-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>µAPM</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module6/ title="µAPM Architecture Overview" class=md-nav__link> µAPM Architecture Overview </a> </li> <li class=md-nav__item> <a href=../../module6/hotrod/ title="Deploying Hot R.O.D. in K3s" class=md-nav__link> Deploying Hot R.O.D. in K3s </a> </li> <li class=md-nav__item> <a href=../../module6/sockshop/ title="Deploying Sock Shop in K3s" class=md-nav__link> Deploying Sock Shop in K3s </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../module-support/cleanup/ title="Post Workshop Clean Up" class=md-nav__link> <b>Post Workshop Clean Up</b> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-8 type=checkbox id=nav-2-8> <label class=md-nav__link for=nav-2-8> <b>Optional Modules</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>Optional Modules</b>" data-md-level=2> <label class=md-nav__title for=nav-2-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>Optional Modules</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module-support/hotrod-eks/ title="Deploying Hot R.O.D. in EKS" class=md-nav__link> Deploying Hot R.O.D. in EKS </a> </li> <li class=md-nav__item> <a href=../../module-support/vm/ title="Deploy Smart Agent on a VM" class=md-nav__link> Deploy Smart Agent on a VM </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> <b>VictorOps</b> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="<b>VictorOps</b>" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> <b>VictorOps</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../module7/vo_getting_started/ title="Getting Started" class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../../module7/vo_integrations/ title=Integrations class=md-nav__link> Integrations </a> </li> <li class=md-nav__item> <a href=../../module7/vo_incident_lifecycle/ title="Incident Lifecycle" class=md-nav__link> Incident Lifecycle </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1-module-pre-requisites class=md-nav__link> 1. Module Pre-requisites </a> </li> <li class=md-nav__item> <a href=#2-launch-multipass-instance class=md-nav__link> 2. Launch Multipass instance </a> </li> <li class=md-nav__item> <a href=#3-launch-ec2-instance class=md-nav__link> 3. Launch EC2 instance </a> <nav class=md-nav aria-label="3. Launch EC2 instance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-prepare-terraform class=md-nav__link> 3.1 Prepare Terraform </a> </li> <li class=md-nav__item> <a href=#32-create-ec2-instance class=md-nav__link> 3.2 Create EC2 Instance </a> </li> <li class=md-nav__item> <a href=#33-ssh-into-ec2-instance class=md-nav__link> 3.3 SSH into EC2 Instance </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=signalfx-smart-agent-lab-summary>SignalFx Smart Agent - Lab Summary<a class=headerlink href=#signalfx-smart-agent-lab-summary title="Permanent link">&para;</a></h1> <ul> <li>Download the Workshop</li> <li>Start a Multipass or AWS EC2 instance</li> <li>Deploy the SignalFx Smart Agent in K3s</li> <li>Validate K3s cluster is visible in Kubernetes Navigator</li> <li>Deploy a NGINX ReplicaSet in K3s</li> <li>Validate NGNIX metrics are flowing</li> </ul> <mark class="critic block"> <p>Minimum recommended time to complete - <strong>20 minutes</strong></p> </mark> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you have been give access to a pre-provisioned EC2 instance, you can ignore the rest of this preparation lab and go straight to the next lab <a href=../../module4/k3s>Deploying the Smart Agent in Kubernetes (K3s)</a>.</p> </div> <hr> <h2 id=1-module-pre-requisites>1. Module Pre-requisites<a class=headerlink href=#1-module-pre-requisites title="Permanent link">&para;</a></h2> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Running Locally</label><div class=tabbed-content> <div class="admonition abstract"> <p class=admonition-title>Multipass</p> <p>Install <a href=https://multipass.run/ >Multipass</a> for your operating system. Make sure you are using at least version <code>1.2.0</code>.</p> <p>On a Mac you can also install via <a href=https://brew.sh/ >Homebrew</a> e.g. <code>brew cask install multipass</code></p> </div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Running in AWS</label><div class=tabbed-content> <div class="admonition abstract"> <p class=admonition-title>EC2 Instance</p> <p>Install <a href=https://www.terraform.io/downloads.html>Terraform</a> for your operating system. Please make sure it is version <code>0.12.18</code> or above.</p> <p>On a Mac you can also install via <a href=https://brew.sh/ >Homebrew</a> e.g. <code>brew install terraform</code>. This will get around Mac OS Catalina security.</p> </div> </div> </div> <p>Regardless if you are running this lab locally or if you are going to create your own AWS/EC2 Instance you need to download the App Dev Workshop zip file locally, unzip the file, rename it and <code>cd</code> into the directory.</p> <div class=tabbed-set data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Linux/Mac OS</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nv>WSVERSION</span><span class=o>=</span><span class=m>1</span>.10
curl -OL https://github.com/signalfx/app-dev-workshop/archive/v<span class=nv>$WSVERSION</span>.zip
unzip v<span class=nv>$WSVERSION</span>.zip
mv app-dev-workshop-<span class=nv>$WSVERSION</span> workshop
<span class=nb>cd</span> workshop
</code></pre></div> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>Windows</label><div class=tabbed-content> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Download the zip by clicking on the following URL <a href=https://github.com/signalfx/app-dev-workshop/archive/v1.10.zip>https://github.com/signalfx/app-dev-workshop/archive/v1.10.zip</a>.</p> <p>Once downloaded, unzip the the file and rename it to <code>workshop</code>. Then, from the command prompt change into that directory.</p> </div> </div> </div> <p>If you are using your own EC2 instance please skip to the <a href=../../module4/prep/#3-launch-ec2-instance>Launch EC2 instance</a></p> <hr> <h2 id=2-launch-multipass-instance>2. Launch Multipass instance<a class=headerlink href=#2-launch-multipass-instance title="Permanent link">&para;</a></h2> <p>In this section you will build and launch the Multipass instance which will run the Kubernetes (K3s) environment that you will use in multiple labs.</p> <div class="admonition important"> <p class=admonition-title>Make sure to use your initials</p> <p>During the build of your Multipass instance you need to provide a name, please use your initials <code>[YOUR_INITIALS]-k3s</code> so that the value of the instance hostname is unique e.g. <code>rwc-k3s</code></p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>In <a href=../../module6/ >Module 6</a> there are two applications available for deployment to emit Traces/Spans for SignalFx µAPM.</p> <p><strong>Hot R.O.D Multipass min. requirements:</strong> 1 vCPU, 5Gb Disk, 1Gb Memory</p> <p><strong>Sock Shop Multipass min. requirements:</strong> 4 vCPU, 15Gb Disk, 8Gb Memory</p> </div> <div class=tabbed-set data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>Hot R.O.D</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>multipass launch \
<span class=hll>--name [YOUR_INITIALS]-k3s \
</span>--cloud-init cloud-init/k3s.yaml
</code></pre></div> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>Sock Shop</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>multipass launch \
<span class=hll>--name [YOUR_INITIALS]-k3s \
</span>--cloud-init cloud-init/k3s.yaml \
--cpus 4 --disk 15G --mem 8G
</code></pre></div> </div> </div> <p>Once the instance has been successfully created (this can take several minutes), shell into it.</p> <div class=tabbed-set data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>multipass shell <span class=o>[</span>YOUR_INITIALS<span class=o>]</span>-k3s
</span></code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code> █████╗ ██████╗ ██████╗     ██████╗ ███████╗██╗   ██╗
██╔══██╗██╔══██╗██╔══██╗    ██╔══██╗██╔════╝██║   ██║
███████║██████╔╝██████╔╝    ██║  ██║█████╗  ██║   ██║
██╔══██║██╔═══╝ ██╔═══╝     ██║  ██║██╔══╝  ╚██╗ ██╔╝
██║  ██║██║     ██║         ██████╔╝███████╗ ╚████╔╝
╚═╝  ╚═╝╚═╝     ╚═╝         ╚═════╝ ╚══════╝  ╚═══╝  

To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details

ubuntu@rwc-k3s:~$
</code></pre></div> </div> </div> <p>Once your instance presents you with the App Dev logo, you have completed the preparation for your Multipass instance and can go directly to the next lab <a href=../../module4/k3s>Deploying the Smart Agent in K3s</a>.</p> <hr> <h2 id=3-launch-ec2-instance>3. Launch EC2 instance<a class=headerlink href=#3-launch-ec2-instance title="Permanent link">&para;</a></h2> <p>In this section you will use terraform to build an EC2 instance in your favorite AWS region and will automatically deploy the Kubernetes (K3s) environment that you will use in this Workshop.</p> <div class="admonition important aws access keys"> <p class=admonition-title>Important</p> <p>You will need access to an AWS account to obtain both <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>In <a href=../../module6/ >Module 6</a> there are two applications available for deployment to emit Traces/Spans for SignalFx µAPM.</p> <p><strong>Hot R.O.D EC2 Instance min. requirements:</strong> <em>t2.micro</em> 1 vCPU, 8Gb Disk, 1Gb Memory</p> <p><strong>Sock Shop EC2 Instance min. requirements:</strong> <em>t2.large</em> 2 vCPU, 15Gb Disk, 8Gb Memory</p> </div> <p>Ask which version is going to be used as part of this Workshop, then select either the Hot R.O.D or Sock Shop option when using terraform to launch your instance.</p> <h3 id=31-prepare-terraform>3.1 Prepare Terraform<a class=headerlink href=#31-prepare-terraform title="Permanent link">&para;</a></h3> <p>The first step is to go into the sub-directory where the terraform files are located</p> <div class=tabbed-set data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><label for=__tabbed_5_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>cd</span> ec2
</code></pre></div> </div> <input id=__tabbed_5_2 name=__tabbed_5 type=radio><label for=__tabbed_5_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>~/workshop/ec2$  
</code></pre></div> </div> </div> <p>Verify that you are running version V0.12.18 or above of Terraform</p> <div class=tabbed-set data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><label for=__tabbed_6_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>terraform version
</code></pre></div> </div> <input id=__tabbed_6_2 name=__tabbed_6 type=radio><label for=__tabbed_6_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Terraform v0.12.24
</code></pre></div> </div> </div> <p>Next, initialize Terraform, this will download or upgrade the AWS Terraform Provider.</p> <div class=tabbed-set data-tabs=7:2><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><label for=__tabbed_7_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>terraform init -upgrade
</code></pre></div> </div> <input id=__tabbed_7_2 name=__tabbed_7 type=radio><label for=__tabbed_7_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Initializing the backend...

Initializing provider plugins...
- Checking for available provider plugins...
- Downloading plugin for provider &quot;aws&quot; (hashicorp/aws) 2.60.0...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = &quot;...&quot; constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.aws: version = &quot;~&gt; 2.60&quot;

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
</code></pre></div> </div> </div> <h3 id=32-create-ec2-instance>3.2 Create EC2 Instance<a class=headerlink href=#32-create-ec2-instance title="Permanent link">&para;</a></h3> <p>Creating the EC2 instance is done in two steps, a planning phase and an apply phase.</p> <ul> <li>The planning phase will validate the Terraform scripts and check what changes it will make to your AWS environment.</li> <li>The apply phase will actually create the instance.</li> </ul> <p>First, you need to create environment variables for your AWS access keys.</p> <div class=tabbed-set data-tabs=8:2><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><label for=__tabbed_8_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll><span class=nb>export</span> <span class=nv>AWS_ACCESS_KEY_ID</span><span class=o>=</span><span class=s2>&quot;[YOUR_AWS_ACCESS_KEY_ID]&quot;</span>
</span><span class=hll><span class=nb>export</span> <span class=nv>AWS_SECRET_ACCESS_KEY</span><span class=o>=</span><span class=s2>&quot;[YOUR_AWS_SECRET_ACCESS_KEY]&quot;</span>
</span><span class=nb>echo</span> <span class=nv>$AWS_ACCESS_KEY_ID</span> <span class=nv>$AWS_SECRET_ACCESS_KEY</span>
</code></pre></div> </div> <input id=__tabbed_8_2 name=__tabbed_8 type=radio><label for=__tabbed_8_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>ID: Axxxxxxxxxxxxxxxxy, KEY: Axxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxb
</code></pre></div> </div> </div> <p>Once you have confirmed that you have set you <code>AWS_SECRET_ACCESS_KEY_ID</code> &amp; <code>AWS_SECRET_ACCESS_KEY</code> correctly, you can start with the planning phase.</p> <div class="admonition important required input for terraform"> <p class=admonition-title>Important</p> <p><strong>Instance Count</strong>: (Type <strong>1</strong> to create a single Instance)</p> <p><strong>Desired AWS Region</strong>: (Any AWS region by name, for example <strong>us-west-2</strong>) </p> <p><strong>Instance Type</strong>: (Type <strong>1</strong> for Hot R.O.D. instance type or <strong>2</strong> for the Sock Shop instance type)</p> <p>Please remember these values as you will need them again for the planning phase and when you use Terraform to destroy your EC2 instance.</p> </div> <p>As we only wish to provide the input once, we are going to capture the output in a <code>.out</code> file that we can use for the apply step. Please provide your initials for the output file as indicated.</p> <div class=tabbed-set data-tabs=9:1><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><label for=__tabbed_9_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>terraform plan -out<span class=o>=[</span>YOUR_INITIALS<span class=o>]</span>.out
</span></code></pre></div> </div> </div> <p>Next enter 1 to to create a single EC2 instance.</p> <div class=tabbed-set data-tabs=10:1><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><label for=__tabbed_10_1>Example</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>var.aws_instance_count
Instance Count

<span class=hll>Enter a value: <span class=m>1</span>
</span></code></pre></div> </div> </div> <p>Enter your desired AWS Region where you wish to run the EC2 instance e.g. <strong>us-west-2</strong></p> <div class=tabbed-set data-tabs=11:1><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><label for=__tabbed_11_1>Example</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>var.aws_region
Provide the desired region

<span class=hll>Enter a value: us-west-2
</span></code></pre></div> </div> </div> <p>Next, enter <strong>1</strong> for Hot R.O.D. instance size (<em>t2.micro</em>) or <strong>2</strong> for Sock Shop instance size (<em>t2.large</em>)</p> <div class=tabbed-set data-tabs=12:2><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><label for=__tabbed_12_1>Example</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>var.instance_type
Select instance <span class=nb>type</span> required <span class=o>(</span><span class=nv>1</span> <span class=o>=</span> Hot R.O.D. <span class=nv>2</span> <span class=o>=</span> Sock Shop<span class=o>)</span>

<span class=hll>Enter a value: <span class=m>1</span>
</span></code></pre></div> </div> <input id=__tabbed_12_2 name=__tabbed_12 type=radio><label for=__tabbed_12_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.aws_ami.latest-ubuntu: Refreshing state...

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
+ create

Terraform will perform the following actions:

**(BIG WALL OF AWS RELATED TEXT REMOVED)**

Plan: 2 to add, 0 to change, 0 to destroy.

------------------------------------------------------------------------

This plan was saved to: [YOUR_INITIALS].out

To perform exactly these actions, run the following command to apply:
terraform apply &quot;[YOUR_INITIALS].out&quot;
</code></pre></div> </div> </div> <p>If there are no errors in the output and terraform has created your output file, you can start the apply phase of Terraform. This will create the instance in AWS EC2.</p> <div class=tabbed-set data-tabs=13:2><input checked=checked id=__tabbed_13_1 name=__tabbed_13 type=radio><label for=__tabbed_13_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>terraform apply <span class=s2>&quot;[YOUR_INITIALS].out&quot;</span>
</span></code></pre></div> </div> <input id=__tabbed_13_2 name=__tabbed_13 type=radio><label for=__tabbed_13_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>ws_security_group.instance: Creating...
aws_security_group.instance: Creation complete after 2s [id=sg-0459afecae5953b51]
aws_instance.app-dev-instance[0]: Creating...
aws_instance.app-dev-instance[0]: Still creating... [10s elapsed]
aws_instance.app-dev-instance[0]: Still creating... [20s elapsed]
aws_instance.app-dev-instance[0]: Creation complete after 23s [id=i-095a12cd39f8e2283]

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.

The state of your infrastructure has been saved to the path
below. This state is required to modify and destroy your
infrastructure, so keep it safe. To inspect the complete state
use the `terraform show` command.

State path: terraform.tfstate

Outputs:

ip = [
&quot;YOUR_IP-ADDRESS&quot;,
] 
</code></pre></div> </div> </div> <p>Verify there are no errors and copy the ip address that you see in the green output. </p> <h3 id=33-ssh-into-ec2-instance>3.3 SSH into EC2 Instance<a class=headerlink href=#33-ssh-into-ec2-instance title="Permanent link">&para;</a></h3> <p>Once the instance has been successfully created (this can take several minutes), ssh into it. In most cases your ssh client will ask you to verify the connection.</p> <div class=tabbed-set data-tabs=14:2><input checked=checked id=__tabbed_14_1 name=__tabbed_14 type=radio><label for=__tabbed_14_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>ssh ubuntu@<span class=o>[</span>YOUR_IP-ADDRESS<span class=o>]</span>
</span></code></pre></div> </div> <input id=__tabbed_14_2 name=__tabbed_14 type=radio><label for=__tabbed_14_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>The authenticity of host &#39;[YOUR_IP-ADDRESS] ([YOUR_IP-ADDRESS])&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:XdqN55g0z/ER660PARM+mGqtpYpwM3333YS9Ac8Y9hLY.
Are you sure you want to continue connecting (yes/no/[fingerprint])?  
</code></pre></div> </div> </div> <p>Please confirm that you wish to continue by replying to the prompt with <code>yes</code></p> <div class=tabbed-set data-tabs=15:2><input checked=checked id=__tabbed_15_1 name=__tabbed_15 type=radio><label for=__tabbed_15_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>Are you sure you want to <span class=k>continue</span> connecting <span class=o>(</span>yes/no/<span class=o>[</span>fingerprint<span class=o>])</span>? yes
</span></code></pre></div> </div> <input id=__tabbed_15_2 name=__tabbed_15 type=radio><label for=__tabbed_15_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Warning: Permanently added &#39;YOUR_IP-ADDRESS&#39; (ECDSA) to the list of known hosts.

ubuntu@YOUR_IP-ADDRESS&#39;s password:
</code></pre></div> </div> </div> <p>To login to your instance please use the password provided by the Workshop host.</p> <div class=tabbed-set data-tabs=16:2><input checked=checked id=__tabbed_16_1 name=__tabbed_16 type=radio><label for=__tabbed_16_1>Input</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>ubuntu@<span class=o>[</span>YOUR_IP-ADDRESS<span class=o>]</span><span class=err>&#39;</span>s password: <span class=o>[</span>PASSWORD<span class=o>]</span>
</span></code></pre></div> </div> <input id=__tabbed_16_2 name=__tabbed_16 type=radio><label for=__tabbed_16_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code> █████╗ ██████╗ ██████╗     ██████╗ ███████╗██╗   ██╗
██╔══██╗██╔══██╗██╔══██╗    ██╔══██╗██╔════╝██║   ██║
███████║██████╔╝██████╔╝    ██║  ██║█████╗  ██║   ██║
██╔══██║██╔═══╝ ██╔═══╝     ██║  ██║██╔══╝  ╚██╗ ██╔╝
██║  ██║██║     ██║         ██████╔╝███████╗ ╚████╔╝
╚═╝  ╚═╝╚═╝     ╚═╝         ╚═════╝ ╚══════╝  ╚═══╝  

To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details

ubuntu@ip-172-31-41-196:~$
</code></pre></div> </div> </div> <p>Once your instance presents you with the App Dev logo, you have completed the preparation for your EC2 instance and can go directly to the next lab <a href=../../module4/k3s>Deploying the Smart Agent in K3s</a>.</p> <hr> <div class=md-source-date> <small> Last update: May 5, 2020 17:23:58 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../module3/teams/ title=Teams class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Teams </div> </div> </a> <a href=../k3s/ title="Deploy the Smart Agent in K3s" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Deploy the Smart Agent in K3s </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Splunk Inc. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.83fe6e3c.min.js></script> <script src=../../assets/javascripts/bundle.7e1cb91c.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=../../javascripts/extra.js></script> </body> </html>