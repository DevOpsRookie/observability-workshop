


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This workshop is going to take you though the exciting journey of App Dev, what this is, why this is important, and how to get started right away!">
      
      
        <link rel="canonical" href="https://signalfx.github.io/app-dev-workshop/archive/apm-python/">
      
      
        <meta name="author" content="Sales Engineering">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.0.2">
    
    
      
        <title>Apm python - Splunk App Dev Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.07c9fbf5.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecd4686e.min.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="black" data-md-color-accent="">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#step-1-infrastructure-setup-complete-now-lets-run-our-first-fully-monitored-application" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://signalfx.github.io/app-dev-workshop/" title="Splunk App Dev Workshop" class="md-header-nav__button md-logo" aria-label="Splunk App Dev Workshop">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Splunk App Dev Workshop
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Apm python
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/signalfx/app-dev-workshop/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://signalfx.github.io/app-dev-workshop/" title="Splunk App Dev Workshop" class="md-nav__button md-logo" aria-label="Splunk App Dev Workshop">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Splunk App Dev Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/signalfx/app-dev-workshop/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      <b>Home</b>
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../introduction/" title="Introduction" class="md-nav__link">
      <b>Introduction</b>
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      <b>Module 1</b> - Dashboards
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 1</b> - Dashboards" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 1</b> - Dashboards
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module1/dashboards/" title="Working with Dashboards, Charts and Metrics" class="md-nav__link">
      Working with Dashboards, Charts and Metrics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      <b>Module 2</b> - Detectors
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 2</b> - Detectors" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 2</b> - Detectors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module2/detectors/" title="Working with Detectors" class="md-nav__link">
      Working with Detectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module2/muting/" title="Working with Muting Rules" class="md-nav__link">
      Working with Muting Rules
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      <b>Module 3</b> - Smart Agent
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 3</b> - Smart Agent" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 3</b> - Smart Agent
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module3/k3s/" title="Deploying the Smart Agent in Kubernetes (K3s)" class="md-nav__link">
      Deploying the Smart Agent in Kubernetes (K3s)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module3/nginx/" title="Deploying NGINX in K3s" class="md-nav__link">
      Deploying NGINX in K3s
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      <b>Module 4</b> - Monitoring as Code
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 4</b> - Monitoring as Code" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 4</b> - Monitoring as Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module4/terraform/" title="Using Terraform for charts and dashboards" class="md-nav__link">
      Using Terraform for charts and dashboards
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      <b>Module 5</b> - Service Bureau
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 5</b> - Service Bureau" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 5</b> - Service Bureau
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module5/service_bureau/" title="Billing and Usage" class="md-nav__link">
      Billing and Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module5/teams/" title="Teams" class="md-nav__link">
      Teams
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      <b>Module 6</b> - µAPM
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 6</b> - µAPM" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 6</b> - µAPM
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module6/" title="µAPM Architecture Overview" class="md-nav__link">
      µAPM Architecture Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module6/hotrod/" title="Running Hotrod in K3s" class="md-nav__link">
      Running Hotrod in K3s
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../module6/sockshop/" title="Running Sock Shop in K3s" class="md-nav__link">
      Running Sock Shop in K3s
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      <b>Module 7</b> - VictorOps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Module 7</b> - VictorOps" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Module 7</b> - VictorOps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module7/" title="Coming Soon!" class="md-nav__link">
      Coming Soon!
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../module-support/cleanup/" title="Post Workshop Clean Up!" class="md-nav__link">
      <b>Post Workshop Clean Up!</b>
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      <b>Optional Modules</b>
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="<b>Optional Modules</b>" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        <b>Optional Modules</b>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../module8/hotrod-eks/" title="Running Hotrod in EKS" class="md-nav__link">
      Running Hotrod in EKS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-infrastructure-setup-complete-now-lets-run-our-first-fully-monitored-application" class="md-nav__link">
    Step 1: Infrastructure setup complete, now let’s run our first fully monitored application!
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-generate-some-traces" class="md-nav__link">
    Step 2: Generate some Traces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-visualizing-the-data" class="md-nav__link">
    Step 3: Visualizing the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-analyzing-traces" class="md-nav__link">
    Step 4: Analyzing Traces
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/signalfx/app-dev-workshop/edit/master/docs/archive/apm-python.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                  <h1>Apm python</h1>
                
                <h2 id="step-1-infrastructure-setup-complete-now-lets-run-our-first-fully-monitored-application">Step 1: Infrastructure setup complete, now let’s run our first fully monitored application!<a class="headerlink" href="#step-1-infrastructure-setup-complete-now-lets-run-our-first-fully-monitored-application" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Switch to the Application instance (the one created in Lab #1) and change to the mypythonapp directory
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span> ~/mypythonapp
</code></pre></div></p>
</li>
<li>
<p>In order to see how the demonstration Python application has been instrumented using https://github.com/signalfx/signalfx-python-tracing type <code>more demo.py</code>
   <div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">make_response</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">signalfx_tracing</span> <span class="kn">import</span> <span class="n">trace</span>
<span class="kn">import</span> <span class="nn">opentracing</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@trace</span>
<span class="k">def</span> <span class="nf">convert_response</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
  <span class="c1"># In this example we want to force this trace to be retained</span>
  <span class="n">opentracing</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">active_span</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s1">&#39;sampling.priority&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="n">opentracing</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">active_span</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">opentracing</span><span class="o">.</span><span class="n">tracer</span><span class="o">.</span><span class="n">active_span</span><span class="p">)</span>
  <span class="k">return</span> <span class="s1">&#39;You said: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/echo&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">echo</span><span class="p">():</span>
  <span class="n">message</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">make_response</span><span class="p">(</span><span class="n">convert_response</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></p>
</li>
<li>
<p>Start the Python application by running the following command, replace <code>[YOUR_INITIALS]</code> to make your application unique.
   <div class="highlight"><pre><span></span><code><span class="nv">SIGNALFX_SERVICE_NAME</span><span class="o">=[</span>YOUR_INITIALS<span class="o">]</span>-app-dev-python-app sfx-py-trace ./demo.py <span class="p">&amp;</span> <span class="nb">disown</span>
</code></pre></div></p>
</li>
</ol>
<p><strong>IMPORTANT:</strong> After running this code, hit the enter key in your keyboard to get out of the process and continue with the following steps. Don't worry, your python app will continue running in the background.</p>
<hr />
<h2 id="step-2-generate-some-traces">Step 2: Generate some Traces<a class="headerlink" href="#step-2-generate-some-traces" title="Permanent link">&para;</a></h2>
<ol>
<li>We will be using a really practical tool to simulate requests called Apache Benchmark or ab. But first let's make sure that the service we started before can actually accept requests, by running the following command:
   <div class="highlight"><pre><span></span><code>curl -XPOST -d<span class="s1">&#39;Hello, world&#39;</span> -H<span class="s1">&#39;Content-Type:text/plain&#39;</span> http://localhost:5000/echo
</code></pre></div></li>
</ol>
<p>You should get something like:
   <div class="highlight"><pre><span></span><code>795cf220f0ee0afa:7a1f10140ad14024:4a81cc4098335da:3 rwc-app-dev-python-app.convert_response
<span class="m">127</span>.0.0.1 - - <span class="o">[</span><span class="m">04</span>/Nov/2019 <span class="m">15</span>:07:24<span class="o">]</span> <span class="s2">&quot;POST /echo HTTP/1.1&quot;</span> <span class="m">200</span> -
</code></pre></div></p>
<p>If you don't get this response, make sure the Step #1.2 (above) was executed properly and that you have a service running called <code>./demo.py</code> executed by python. On the Application instance itself you can confirm this by running <code>ps -ef | grep demo.py</code></p>
<ol>
<li>
<p>Now that we know we can call our service, let's run ab to simulate load and start generating traces that our Smart Gateway can capture and send to the SignalFx platform. Confirm a file named <code>~/mypythonapp/post_data.json</code> exists and has the following inside:
   <div class="highlight"><pre><span></span><code>&quot;Hello from the App Dev Workshop!&quot;
</code></pre></div></p>
</li>
<li>
<p>Save the file, and in the same directory, execute the following:
   <div class="highlight"><pre><span></span><code>ab -p post_data.json -T application/json -c20 -n1000 http://localhost:5000/echo
</code></pre></div></p>
</li>
</ol>
<p>This will create 20 concurrent connections to our localhost python app, and it will post the data 1000 times.</p>
<hr />
<h2 id="step-3-visualizing-the-data">Step 3: Visualizing the Data<a class="headerlink" href="#step-3-visualizing-the-data" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Over in SignalFx, under the Built-In Dashboard Groups, you will see a Smart Gateway Dashboard group. Go to the Cluster(s) Dashboard:</p>
</li>
<li>
<p>Over there you will see information about the host running the Smart Gateway, and a few other numbers that are important. But the most important of all, are the 3 big number group of charts, showing TAPM, Retained TPM and APM Identities.</p>
</li>
<li>
<p><strong>TAPM</strong> are the Traces Analysed Per Minute, which is the amount of traces that the Smart Gateway is ingesting and processing.</p>
</li>
<li>
<p><strong>Retained TPM</strong> are the traces that the Smart Gateway, after processing them, think are important to keep, and send to SignalFx for further analysis by the users.</p>
</li>
<li>
<p><strong>APM Identities</strong> are each unique span and initiating span/endpoint tracked by the Smart Gateway and sent to SignalFx. To explain this a little better please see the following image:</p>
</li>
</ol>
<p>If you want to know more about Traces, Spans, Metrics and Metadata, please follow this link. If everything goes according to plan, you should see in that dashboard, some numbers that represent the test we just did.</p>
<hr />
<h2 id="step-4-analyzing-traces">Step 4: Analyzing Traces<a class="headerlink" href="#step-4-analyzing-traces" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Navigate to uAPM → Traces on the main toolbar, then ensure you have selected your cluster from the Cluster dropdown at the top left, you should see something like this:</p>
</li>
<li>
<p>Feel free to investigate our built-in Outlier Analysis, showing the potential source of our problems in our application, or navigate to some of the traces, and inspect the payload we sent in our test.
You go to a trace by clicking on it:</p>
</li>
</ol>
<p>Then click on the span that handled the response, and see the message:</p>
<ol>
<li>
<p>Feel free to continue navigating uAPM features now that we have traces and spans going in.
Also, you can try sending more tests or changing the payload of the tests to see how fast the new tests are ingested and analyzed in SignalFx.</p>
</li>
<li>
<p>Once you finish, please proceed to <a href="https://github.com/signalfx/app-dev-workshop/wiki/Module-2-Lab-3:-Simple-Java-auto-instrumentation">Lab 3: Simple Java auto-instrumentation</a></p>
</li>
</ol>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: April 9, 2020 20:48:17
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Splunk Inc. All rights reserved.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>